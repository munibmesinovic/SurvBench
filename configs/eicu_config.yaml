# eICU Dataset Configuration

dataset:
  name: eicu
  base_dir: data/eicu_raw_data  # UPDATE THIS PATH to raw eICU 2.0 files

  files:
    # These keys point to RAW eICU 2.0 files
    patient: patient.csv
    lab: lab.csv
    vital_periodic: vitalPeriodic.csv.gz
    vital_aperiodic: vitalAperiodic.csv.gz
    # 'labels' and 'flat' are no longer used by the loader,
    # as this info is derived from patient.csv

  cohort:
    min_stay_hours: 24
    max_age: 89 # As per notebook, will filter out '> 89'

preprocessing:
  num_windows: 6
  window_size_hours: 4
  max_hours: 24
  max_horizon_hours: 240 # 10-day survival horizon (from notebook)
  n_time_bins: 10
  discretisation_method: quantiles
  missingness_threshold: 0.01

  # These are now set by the new loader internally
  event_col: event
  duration_col: duration

  imputation:
    static: mean
    dynamic: zero

  scaling:
    method: standard
    apply_to: dynamic

splits:
  train: 0.7
  val: 0.1
  test: 0.2
  seed: 42
  split_by: patient # Uses 'subject_id' (patienthealthsystemstayid)

modalities:
  timeseries: true
  static: true
  icd: false       # eICU loader doesn't support ICDs/Notes
  radiology: false

output:
  dir: data/eicu_processed_final  # UPDATE THIS PATH
  prefix: eicu
  save_format: numpy

  files:
    x_train: x_train_eicu.npy
    x_val: x_val_eicu.npy
    x_test: x_test_eicu.npy
    y_train: y_train_surv_eicu.p
    y_val: y_val_surv_eicu.p
    durations_test: durations_test_eicu.npy
    events_test: events_test_eicu.npy
    cuts: cuts_eicu.npy
    out_features: out_features_eicu.npy
    feature_names: feature_names.pkl
    modality_info: modality_info.pkl # Added this for consistency
    scaler: scaler.pkl

    # Masks
    train_mask: x_train_eicu_mask.npy
    val_mask: x_val_eicu_mask.npy
    test_mask: x_test_eicu_mask.npy